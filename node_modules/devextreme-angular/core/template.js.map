{"version":3,"file":"template.js","sourceRoot":"","sources":["template.ts"],"names":[],"mappings":";;;;;;;;;;;;;;AAeA,sCAQuB;AAEvB,iDAAiD;AACjD,iCAAqC;AACrC,0CAA4C;AAE/B,QAAA,yBAAyB,GAAG,qBAAqB;AAE9D,IAAA;;;qBA/BA;IAmCC,CAAA;AAJY,gCAAU;;IAgBnB,6BAAoB,WAA6B,EACrC,gBAAkC,EAC1C,YAA4B,EACpB,QAAmB,EACnB,MAAc;QAJN,gBAAW,GAAX,WAAW,CAAkB;QACrC,qBAAgB,GAAhB,gBAAgB,CAAkB;QAElC,aAAQ,GAAR,QAAQ,CAAW;QACnB,WAAM,GAAN,MAAM,CAAQ;QACtB,YAAY,CAAC,WAAW,CAAC,IAAI,CAAC,CAAC;KAClC;0BAXG,6CAAY;uBAAC,KAAK;YAClB,IAAI,CAAC,IAAI,GAAG,KAAK,CAAC;;;;;IACrB,CAAC;IAWF,oCAAM,GAAN,UAAO,UAAsB;QAA7B,iBAuCC;QAtCG,IAAI,cAAc,GAAG;YACjB,MAAM,CAAC,KAAI,CAAC,gBAAgB,CAAC,kBAAkB,CAAC,KAAI,CAAC,WAAW,EAAE;gBAC9D,WAAW,EAAE,UAAU,CAAC,KAAK;gBAC7B,KAAK,EAAE,UAAU,CAAC,KAAK;aAC1B,CAAC,CAAC;SACN,CAAC;QAEF,IAAI,SAAS,CAAC;QACd,EAAE,CAAC,CAAC,IAAI,CAAC,MAAM,CAAC,QAAQ,CAAC,CAAC,CAAC;YACvB,SAAS,GAAG,IAAI,CAAC,MAAM,CAAC,GAAG,CAAC,cAAM,OAAA,cAAc,EAAE,EAAhB,CAAgB,CAAC,CAAC;SACvD;QAAC,IAAI,CAAC,CAAC;YACJ,SAAS,GAAG,cAAc,EAAE,CAAC;SAChC;QACD,IAAI,SAAS,GAAG,kBAAU,CAAC,UAAU,CAAC,SAAS,CAAC,CAAC;QACjD,EAAE,CAAC,CAAC,UAAU,CAAC,SAAS,CAAC,CAAC,CAAC;YACvB,SAAS,CAAC,SAAS,CAAC,OAAO,CAAC,UAAC,OAAO;gBAChC,KAAI,CAAC,QAAQ,CAAC,WAAW,CAAC,SAAS,EAAE,OAAO,CAAC,CAAC;aACjD,CAAC,CAAC;SACN;;;QAGD,IAAI,CAAC,MAAM,CAAC,GAAG,CAAC;YACZ,SAAS,CAAC,eAAe,CAAC,EAAE,CAAC;SAChC,CAAC,CAAC;;QAEH,SAAS,CAAC,SAAS,CAAC,OAAO,CAAC,UAAC,OAAO;YAChC,EAAE,CAAC,CAAC,OAAO,CAAC,QAAQ,KAAK,CAAC,CAAC,CAAC,CAAC;gBACzB,KAAI,CAAC,QAAQ,CAAC,QAAQ,CAAC,OAAO,EAAE,iCAAyB,CAAC,CAAC;aAC9D;YAED,MAAM,CAAC,GAAG,CAAC,OAAO,EAAE,UAAU,EAAE,UAAC,CAAC;gBAC9B,EAAE,CAAC,CAAC,CAAC,CAAC,CAAC,mBAAmB,CAAC,CAAC,CAAC;oBACzB,SAAS,CAAC,OAAO,EAAE,CAAC;iBACvB;aACJ,CAAC,CAAC;SACN,CAAC,CAAC;QAEH,MAAM,CAAC,SAAS,CAAC,SAAS,CAAC;KAC9B;;gBAzDJ,gBAAS,SAAC;oBACP,QAAQ,EAAE,cAAc;iBAC3B;;;;gBArBG,kBAAW;gBACX,uBAAgB;gBAMX,8BAAc;gBAJnB,gBAAS;gBACT,aAAM;;;iCAmBL,YAAK;;8BAzCV;;AAwCa,kDAAmB;;;;;gBAyD/B,eAAQ,SAAC;oBACN,YAAY,EAAE,CAAC,mBAAmB,CAAC;oBACnC,OAAO,EAAE,CAAC,mBAAmB,CAAC;iBACjC;;2BApGD;;AAqGa,4CAAgB","sourcesContent":["/*!\n * devextreme-angular\n * Version: 18.1.4\n * Build date: Thu Jun 21 2018\n *\n * Copyright (c) 2012 - 2018 Developer Express Inc. ALL RIGHTS RESERVED\n *\n * This software may be modified and distributed under the terms\n * of the MIT license. See the LICENSE file in the root of the project for details.\n *\n * https://github.com/DevExpress/devextreme-angular\n */\n\n/* tslint:disable:use-input-property-decorator */\r\n\r\nimport {\r\n    Directive,\r\n    NgModule,\r\n    TemplateRef,\r\n    ViewContainerRef,\r\n    Input,\r\n    Renderer2,\r\n    NgZone\r\n} from '@angular/core';\r\n\r\nimport { DxTemplateHost } from './template-host';\r\nimport { getElement } from './utils';\r\nimport * as events from 'devextreme/events';\r\n\r\nexport const DX_TEMPLATE_WRAPPER_CLASS = 'dx-template-wrapper';\r\n\r\nexport class RenderData {\r\n    model: any;\r\n    index: number;\r\n    container: any;\r\n}\r\n\r\n@Directive({\r\n    selector: '[dxTemplate]'\r\n})\r\nexport class DxTemplateDirective {\r\n    @Input()\r\n    set dxTemplateOf(value) {\r\n        this.name = value;\r\n    };\r\n    name: string;\r\n\r\n    constructor(private templateRef: TemplateRef<any>,\r\n        private viewContainerRef: ViewContainerRef,\r\n        templateHost: DxTemplateHost,\r\n        private renderer: Renderer2,\r\n        private ngZone: NgZone) {\r\n        templateHost.setTemplate(this);\r\n    }\r\n\r\n    render(renderData: RenderData) {\r\n        let renderTemplate = () => {\r\n            return this.viewContainerRef.createEmbeddedView(this.templateRef, {\r\n                '$implicit': renderData.model,\r\n                index: renderData.index\r\n            });\r\n        };\r\n\r\n        let childView;\r\n        if (this.ngZone.isStable) {\r\n            childView = this.ngZone.run(() => renderTemplate());\r\n        } else {\r\n            childView = renderTemplate();\r\n        }\r\n        let container = getElement(renderData.container);\r\n        if (renderData.container) {\r\n            childView.rootNodes.forEach((element) => {\r\n                this.renderer.appendChild(container, element);\r\n            });\r\n        }\r\n        // =========== WORKAROUND =============\r\n        // https://github.com/angular/angular/issues/12243\r\n        this.ngZone.run(() => {\r\n            childView['detectChanges']();\r\n        });\r\n        // =========== /WORKAROUND =============\r\n        childView.rootNodes.forEach((element) => {\r\n            if (element.nodeType === 1) {\r\n                this.renderer.addClass(element, DX_TEMPLATE_WRAPPER_CLASS);\r\n            }\r\n\r\n            events.one(element, 'dxremove', (e) => {\r\n                if (!e._angularIntegration) {\r\n                    childView.destroy();\r\n                }\r\n            });\r\n        });\r\n\r\n        return childView.rootNodes;\r\n    }\r\n}\r\n\r\n@NgModule({\r\n    declarations: [DxTemplateDirective],\r\n    exports: [DxTemplateDirective]\r\n})\r\nexport class DxTemplateModule { }\r\n"]}