{"version":3,"sources":["component.ts"],"names":[],"mappings":"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","file":"component.js","sourceRoot":"","sourcesContent":["/*!\n * devextreme-angular\n * Version: 17.2.4\n * Build date: Wed Dec 13 2017\n *\n * Copyright (c) 2012 - 2017 Developer Express Inc. ALL RIGHTS RESERVED\n *\n * This software may be modified and distributed under the terms\n * of the MIT license. See the LICENSE file in the root of the project for details.\n *\n * https://github.com/DevExpress/devextreme-angular\n */\n\nimport {\r\n    ElementRef,\r\n    NgZone,\r\n    QueryList,\r\n    AfterViewInit,\r\n    AfterViewChecked\r\n} from '@angular/core';\r\n\r\nimport { DxTemplateDirective } from './template';\r\nimport { IDxTemplateHost, DxTemplateHost } from './template-host';\r\nimport { EmitterHelper } from './events-strategy';\r\nimport { WatcherHelper } from './watcher-helper';\r\nimport * as events from 'devextreme/events';\r\nimport { removeElement } from './utils';\r\nimport {\r\n    INestedOptionContainer,\r\n    ICollectionNestedOption,\r\n    ICollectionNestedOptionContainer,\r\n    CollectionNestedOptionContainerImpl\r\n} from './nested-option';\r\n\r\nexport abstract class DxComponent implements AfterViewInit,\r\n        INestedOptionContainer, ICollectionNestedOptionContainer, IDxTemplateHost, AfterViewChecked {\r\n    private _initialOptions: any = {};\r\n    private _collectionContainerImpl: ICollectionNestedOptionContainer;\r\n    eventHelper: EmitterHelper;\r\n    templates: DxTemplateDirective[];\r\n    instance: any;\r\n    isLinked = true;\r\n    changedOptions = {};\r\n    renderOnViewInit = true;\r\n    widgetUpdateLocked = false;\r\n\r\n    protected _events: { subscribe?: string, emit: string }[];\r\n\r\n    private _initTemplates() {\r\n        if (this.templates.length) {\r\n            let initialTemplates = {};\r\n            this.templates.forEach(template => {\r\n                initialTemplates[template.name] = template;\r\n            });\r\n            this._initialOptions.integrationOptions.templates = initialTemplates;\r\n        }\r\n    }\r\n    private _initOptions() {\r\n        this._initialOptions.eventsStrategy = this.eventHelper.strategy;\r\n        this._initialOptions.integrationOptions.watchMethod = this.watcherHelper.getWatchMethod();\r\n    }\r\n    protected _createEventEmitters(events) {\r\n        events.forEach(event => {\r\n            this.eventHelper.createEmitter(event.emit, event.subscribe);\r\n        });\r\n    }\r\n    _shouldOptionChange(name: string, value: any) {\r\n        if (this.changedOptions.hasOwnProperty(name)) {\r\n            const prevValue = this.changedOptions[name];\r\n            delete this.changedOptions[name];\r\n\r\n            return value !== prevValue;\r\n        }\r\n        return true;\r\n    }\r\n    protected _getOption(name: string) {\r\n        return this.instance ?\r\n            this.instance.option(name) :\r\n            this._initialOptions[name];\r\n    }\r\n    protected _setOption(name: string, value: any) {\r\n        if (this.instance) {\r\n            this._updateOption(name, value);\r\n        } else {\r\n            this._initialOptions[name] = value;\r\n        }\r\n    }\r\n    lockWidgetUpdate() {\r\n        if (!this.widgetUpdateLocked) {\r\n            this.instance.beginUpdate();\r\n            this.widgetUpdateLocked = true;\r\n        }\r\n    }\r\n    protected _updateOption(name: string, value: any) {\r\n        this.lockWidgetUpdate();\r\n        if (this._shouldOptionChange(name, value)) {\r\n            this.instance.option(name, value);\r\n        };\r\n    }\r\n    protected abstract _createInstance(element, options)\r\n    protected _createWidget(element: any) {\r\n        this._initialOptions.integrationOptions = {};\r\n        this._initTemplates();\r\n        this._initOptions();\r\n\r\n        let optionChangeHandler = (e) => {\r\n            this.eventHelper.rememberEvent(e.name);\r\n        };\r\n\r\n        this._initialOptions.onInitializing = function() {\r\n            this.on('optionChanged', optionChangeHandler);\r\n        };\r\n        this.instance = this._createInstance(element, this._initialOptions);\r\n        this._initialOptions = {};\r\n\r\n        this.instance.off('optionChanged', optionChangeHandler);\r\n        this.instance.on('optionChanged', (e) => {\r\n            this.changedOptions[e.name] = e.value;\r\n            this.eventHelper.fireNgEvent(e.name + 'Change', [e.value]);\r\n        });\r\n    }\r\n    protected _destroyWidget() {\r\n        if (this.instance) {\r\n            let element = this.instance.element();\r\n            events.triggerHandler(element, { type: 'dxremove', _angularIntegration: true });\r\n            this.instance.dispose();\r\n            removeElement(element);\r\n        }\r\n    }\r\n    constructor(protected element: ElementRef, private ngZone: NgZone, templateHost: DxTemplateHost, private watcherHelper: WatcherHelper) {\r\n        this.templates = [];\r\n        templateHost.setHost(this);\r\n        this._collectionContainerImpl = new CollectionNestedOptionContainerImpl(this._setOption.bind(this));\r\n        this.eventHelper = new EmitterHelper(this.ngZone, this);\r\n    }\r\n    ngAfterViewChecked() {\r\n        if (this.widgetUpdateLocked) {\r\n            this.widgetUpdateLocked = false;\r\n            this.instance.endUpdate();\r\n        }\r\n    }\r\n    ngAfterViewInit() {\r\n        if (this.renderOnViewInit) {\r\n            this._createWidget(this.element.nativeElement);\r\n        }\r\n    }\r\n    setTemplate(template: DxTemplateDirective) {\r\n        this.templates.push(template);\r\n    }\r\n    setChildren<T extends ICollectionNestedOption>(propertyName: string, items: QueryList<T>) {\r\n        return this._collectionContainerImpl.setChildren(propertyName, items);\r\n    }\r\n}\r\n\r\nexport abstract class DxComponentExtension extends DxComponent {\r\n    createInstance(element: any) {\r\n        this._createWidget(element);\r\n    }\r\n}\r\n"]}